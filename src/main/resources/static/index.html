<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
            integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
            crossorigin="anonymous"></script>
</head>
<script>

    const uploadImage = () => {


        postData().then(response => {
            if(response.status === 201){
                alert("new image was added!");
            }else{
                alert("image wasn't added!");
            }
        });

    }

    async function postData() {
        const form = document.getElementById('imageFormId');
        const formData = new FormData(form);

        const requestOptions = {
            method: 'POST',
            body: formData
        }
        let domain = window.location.origin;

        return  await   fetch(domain + '/images', requestOptions);
    }

</script>
<script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
<script>
    window.onload = function () {

//Better to construct options first and then pass it as a parameter
        var options = {
            title: {
                text: "Spline Chart with Export as Image"
            },
            animationEnabled: true,
            exportEnabled: true,
            data: [
                {
                    type: "spline", //change it to line, area, column, pie, etc
                    dataPoints: [
                        { x: 10, y: 10, label: 'IT' },
                        { x: 20, y: 12 },
                        { x: 30, y: 8 },
                        { x: 40, y: 14 },
                        { x: 50, y: 6 },
                        { x: 60, y: 24 },
                        { x: 70, y: -4 },
                        { x: 80, y: 10 }
                    ]
                }
            ]
        };
        $("#chartContainer").CanvasJSChart(options);

    }
</script>
<body>

<div class="container">

    <!DOCTYPE HTML>
    <html>
    <head>

    </head>
    <body>
    <div id="chartContainer" style="height: 370px; width: 100%;"></div>

    </body>


    <button type="button" onclick="uploadImage()" class="p-2 m-2 btn btn-primary">UPLOAD IMAGE</button>

    <ul class="list-group" id="citizenGrid">
    </ul>

    <!--    <img src="/files/keke.jpeg">-->
    <form id="imageFormId" method="POST" enctype="multipart/form-data">
        <input type="file" name="file"/><br/><br/>
    </form>

</div>

</body>

</html>